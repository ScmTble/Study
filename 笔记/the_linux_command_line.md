《linux 命令行大全》笔记

只记录未掌握的部分





### 目录

| 目录           | 内容                                                         |
| -------------- | ------------------------------------------------------------ |
| /              | 根目录                                                       |
| /bin           | 包含系统启动和运行的必要文件：linux内核、最初的RAM磁盘镜像和启动加载程序 |
| /boot          | /boot/gurb/gurb.conf 或 menu.lsit，用来配置启动加载程序；/boot/vmlinuz linux内核 |
| /dev           | 设备文件                                                     |
| /etc           | /etc/crontab，该文件定义了自动化任务运行的时间      /etc/fstab，存储设备以及相关挂载点的列表    /etc/passwd，用户帐号列表 |
| /home          | 普通用户目录                                                 |
| /lib           | 包含核心系统程序使用的共享文件                               |
| /lost+found    | 当系统崩溃时，该目录用来恢复分区。如果不出想很严重的问题，文件一般都是空的 |
| /media         | 包含可移除设备的挂载点                                       |
| /mnt           | 早期linux中，包含手动挂载的可移除设备的挂载点                |
| /opt           | 用来安装其他可选软件。主要用来肯安装在系统的商业软件         |
| /proc          | 从文件角度说，该目录不是存储在硬盘中的真正的文件系统，反而是一个linux内核维护的虚拟文件系统。它包含的文件是内核的窥视孔。该文件可读，从内部可以看到内核是如何监管计算机的 |
| /root          | root 用户的主目录                                            |
| /sbin          | “系统”二进制文件，这些程序执行很重要的任务，通常是为超级用户预留的 |
| /tmp           | 供用户存放各类程序创建的临时文件的目录，每次系统重启会清空该目录 |
| /usr           | /usr 目录可能是linux系统中的最大的树目录，包含普通用户使用的所有程序和相关文件 |
| /usr/bin       | 一些linux发行版安装的可执行程序。该目录通常会有上万个程序    |
| /usr/lib       | 程序使用的共享库                                             |
| /usr/local     | 这个目录并非自带的，但打算让系统使用的程序安装目录。源码编译的程序通常安装在/usr/local/bin |
| /usr/sbin      | 包含更多的系统管理程序                                       |
| /usr/share     | 包含了/usr/bin中的程序使用的全部共享数据，包括默认配置、文件、图标、屏幕背景、音频文件等 |
| /usr/share/doc | 安装的文档文件                                               |
| /var           | 除了/tmp和/home目录外，目前看到的目录都是相对静态的。而那些可能改变的数据存储在/var目录树里。各种数据库、假脱机文件、用户邮件都存储在这里 |
| /var/log       | 日志文件，记录了各种系统活动。                               |





### 通配符

| 通配符        | 匹配项                           |
| ------------- | -------------------------------- |
| *             | 匹配任意多个字符(包括0和1)       |
| ?             | 匹配任一个单字符(不包括0)        |
| [characters]  | 匹配任一个属于字符集中的字符     |
| [!characters] | 匹配任一个不属于字符集中的字符   |
| [[:class:]]   | 匹配任一个属于指定字符类中的字符 |

以下是常用的字符类

| 字符类    | 匹配项               |
| --------- | -------------------- |
| [:alnum:] | 匹配任意一个字母数字 |
| [:alpha:] | 匹配任意一个字母     |
| [:digit:] | 匹配任意一个数字     |
| [:lower:] | 匹配任意一个大写字母 |
| [:upper:] | 匹配任意一个小写字母 |





### 链接

- 创建硬链接

  ```shell
  ln file link
  ```

- 创建符号链接 (item == file / directory)

  ```shell
  ln -s item link
  ```

#### 硬链接

​	硬链接是最初UNIX系统创建链接的方式，符号链接更加先进。默认情况下，每个文件都有一个硬链接，硬链接会给文件取名字，当创建硬链接的时候也为这个文件创建了一个额外的目录条目。硬链接有两个重要的局限性：

- 硬链接不能引用文件系统之外的文件。也就是不能引用与该链接不再同一磁盘分区的文件。
- 硬链接无法引用目录

#### 符号链接

> lrwxrwxrwx 1 root root

​	l 代表软链接(symlink)，如果是 d 代表是文件夹，没有就是文件。软链接就是使一个程序有多个名字，这样文件名可以加上版本号，但不用考虑升级后调用该文件的程序更新调用名称。



### 手册

#### man手册结构

| 部分 | 内容                           |
| ---- | ------------------------------ |
| 1    | 用户命令                       |
| 2    | 内核系统调用的程序接口         |
| 3    | C库函数程序接口                |
| 4    | 特殊文件、如设备节点和驱动程序 |
| 5    | 文件格式                       |
| 6    | 游戏和娱乐，例如屏幕保护程序   |
| 7    | 其他杂项                       |
| 8    | 系统管理命令                   |

```shell
man 1 ls
```





### 重定向

- 普通重定向

  ```shell
  ls -l /etc > ls-etc.txt 
  ```

- 错误重定向

  ```shell
  ls -l /666 2> err.conf
  ```

0 代表输入文件，1 代表输出文件，2 代表错误输出文件。可以将错误重定向到位桶中来抑制错误信息。

#### 位桶(bit bucket)

/dev/null 是一个被成为位桶的设备，它接受输入但是不对输入进行任何处理。可以用来隐藏一个命令的错误信息。

#### 标准输入重定向

cat 合并文件，cat 读取一个或多个文件，并把他们复制到标准输出文件中。

例如有些多媒体文件经常被拆分，可以用cat还原为原文件

```shell
cat movie.mepg.001 move.mepg.002 ... movie.mepg.009 > movie.mpeg
```

这样来接受标准输入(输出文件内容)

```shell
cat < file
```





#### 管道

管道 | (竖线)，可以把一个命令的标准输出传入到另一个命令里面

```shell
command | command
```





#### 过滤器

```shell
ls /bin /usr/bin | sort | less
```

管道可以对数据进行复杂操作，多条命令结合在一起被称为过滤器(filter)





#### uniq 报告或忽略文件中重复的行

uniq命令一般结合 sort 命令使用，可删去重复行

```shell
ls /bin /usr/bin | sort | uniq | less
```

还可以只看重复的内容

```shell
ls /bin /usr/bin | sort | uniq -d | less
```





#### wc 打印行数、字数和字节数

字数统计(word count)用来先生文件中包含的行数字数和字节数

```shell
wc file
```





#### grep 打印匹配行

```shell
grep pattern [file...]
```





#### head / tail 打印文件的开头 / 结尾部分

```shell
head -n 5 file
```

````shell
tail -n 5 file
````

这些命令也可以用在管道里

```shell
ls /usr/bin | tail -n 8
```

tail 命令有个功能可以用来监视正在被写入的文件

```shell
tail -f /var/log/messages
```





#### tee 从stdin读取数据，并输出到stdout 和 文件

```shell
ls /usr/bin | tee s.txt | grep zip
```



### 扩展

将字符序列（比如*）处理成结果的过程被称为扩展(expansion)

#### 路径名扩展

通过使用通配符扩展路径名叫做路径名扩展(pathname expansion)

```shell
echo *
echo D*
echo [[:upper:]]*
```

#### 隐藏文件的路径名扩展

```shell
ls -d .[!.]?*
```

点代表以点开头，感叹号代表不匹配点，问好代表至少匹配一个符号，星号则代表可以匹配更多

#### 波浪线扩展







